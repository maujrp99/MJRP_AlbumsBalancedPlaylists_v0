rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
  
    // ‚ö†Ô∏è WARNING: Current codebase writes to /users/{userId} directly.
    // These rules expect /artifacts/{appId}/users/{userId}.
    // Applying these rules will BLOCK all access to existing paths.
    
    // Rule Request: Match under /artifacts
    match /artifacts/{appId}/users/{userId}/curator/{document=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Requested Inventory Match
    match /artifacts/{appId}/users/{userId}/inventory/{document=**} {
 			allow read, write: if request.auth != null && request.auth.uid == userId;
		}
    
    // Fallback for current development (Anonymous User)
    // REMOVE THIS BEFORE PRODUCTION if using Auth
    match /users/{userId}/{document=**} {
      allow read, write: if true; // üö® INSECURE: Allows anonymous access matching code logic
    }
  }
}
